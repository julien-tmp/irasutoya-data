general:
  branches:
    ignore:
      - gh-pages
machine:
  timezone:
    'Asia/Tokyo'
  ruby:
    version:
      '2.3.0'
test:
  override:
    - bundle exec ruby scripts/aggregator.rb
deployment:
  publish:
    branch:
      'gh-pages'
    commands:
      - rm -rf .git
      - cd dist
      - rm -f .gitkeep
      - git config --global user.name "CircleCI"
      - git config --global user.email "circle-ci@june29.jp"
      - git init
      - git add .
      - git commit -m "Deploy by CircleCI"
      - git push --force --quiet origin gh-pages
